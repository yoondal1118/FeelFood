<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶”ì²œ ìŒì‹ ë¦¬ìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        
        <!-- ========================================== -->
        <!-- í—¤ë”: ì„ íƒí•œ ì¡°ê±´ í‘œì‹œ -->
        <!-- ========================================== -->
        <div class="header">
            <!-- í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ -->
            <button class="back-btn" onclick="location.href='/'">
                â† ì²˜ìŒìœ¼ë¡œ
            </button>
            
            <!-- ì„ íƒí•œ ì¡°ê±´ì„ ë™ì ìœ¼ë¡œ í‘œì‹œ -->
            <h1 class="page-title">
                <!-- Jinja2 í…œí”Œë¦¿ ë¬¸ë²•: if ì¡°ê±´ë¬¸ -->
                <!-- app.pyì—ì„œ ì „ë‹¬ë°›ì€ selected_type, selected_value ì‚¬ìš© -->
                
                {% if selected_type == 'emotion' %}
                    {% if selected_value == 'í¬' %}
                        ê¸°ì  ë•ğŸ˜Š! ì—¬ê¸° ì–´ë•Œ?!
                    {% elif selected_value == 'ë…¸' %}
                        í™”ë‚  ë•ğŸ˜ ! ì—¬ê¸° ì–´ë•Œ?!
                    {% elif selected_value == 'ì• (ìŠ¬í””)' %}
                        ìŠ¬í”Œ ë•ã… ğŸ˜¢ ì—¬ê¸° ì–´ë•Œ?!
                    {% elif selected_value == 'ì• (ì‚¬ë‘)' %}
                        ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ë‚ â¤ï¸ ì—¬ê¸° ì–´ë•Œ?!
                    {% elif selected_value == 'ë½' %}
                        ì¦ê±°ìš¸ ë•ğŸ‰! ì—¬ê¸° ì–´ë•Œ?!
                    {% else %}
                        ğŸ¤”
                    {% endif %}
                {% elif selected_type == 'weather' %}
                    <!-- ë‚ ì”¨ë¥¼ ì„ íƒí•œ ê²½ìš° -->
                    â˜€ï¸ ì˜¤ëŠ˜ ë‚ ì”¨ì— ë§ëŠ” ì¶”ì²œ ìŒì‹
                {% elif selected_type == 'fortune' %}
                    <!-- ìš´ì„¸ë¥¼ ì„ íƒí•œ ê²½ìš° -->
                    ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸ì— ë§ëŠ” ì¶”ì²œ ìŒì‹
                {% else %}
                    <!-- ê·¸ ì™¸ì˜ ê²½ìš° (ê¸°ë³¸ê°’) -->
                    ğŸ½ï¸ ì¶”ì²œ ìŒì‹
                {% endif %}
            </h1>

            <!-- ğŸ“ ëŒ€í•™êµ ë³€ê²½ (ì˜¤ë¥¸ìª½ì— ë°°ì¹˜) -->
            <div class="university-header-right">
                <label for="universityChangeSelect" class="university-label-inline">ğŸ“ ëŒ€í•™êµ:</label>
                <select id="universityChangeSelect" class="university-select-inline" onchange="changeUniversity()">
                    <option value="">ì„ íƒ</option>
                    <option value="ì„œìš¸ëŒ€">ì„œìš¸ëŒ€</option>
                    <option value="ë¶€ì‚°ëŒ€">ë¶€ì‚°ëŒ€</option>
                    <option value="ê²½ë¶ëŒ€">ê²½ë¶ëŒ€</option>
                    <option value="ì „ë¶ëŒ€">ì „ë¶ëŒ€</option>
                    <option value="ì „ë‚¨ëŒ€">ì „ë‚¨ëŒ€</option>
                    <option value="ê²½ìƒëŒ€">ê²½ìƒëŒ€</option>
                    <option value="ì¶©ë¶ëŒ€">ì¶©ë¶ëŒ€</option>
                    <option value="ì¶©ë‚¨ëŒ€">ì¶©ë‚¨ëŒ€</option>
                    <option value="ê°•ì›ëŒ€">ê°•ì›ëŒ€</option>
                    <option value="ì œì£¼ëŒ€">ì œì£¼ëŒ€</option>
                </select>
            </div>
        </div>
        
        <!-- ========================================== -->
        <!-- ì¶”ì²œ ìŒì‹ ì¹´í…Œê³ ë¦¬ë³„ í‘œì‹œ -->
        <!-- ========================================== -->

        <!-- ğŸŒ¤ï¸ ë‚ ì”¨ ê¸°ë°˜: ìˆœì„œëŒ€ë¡œ í‘œì‹œ (ìƒˆë¡œ ì¶”ê°€) -->
    {% if ordered_categories %}
        {% for category in ordered_categories %}
            {% if category in recommendations %}
                <div class="category-section">
                    <!-- ì¹´í…Œê³ ë¦¬ í—¤ë” (í•œì‹, ì¤‘ì‹ ì¼ì‹ ì–‘ì‹...) -->
                <div class="category-header">
                    <!-- ì¹´í…Œê³ ë¦¬ ì´ë¦„ -->
                    <h2 class="category-title">{{ category }}</h2>
                    
                    <!-- "ë” ë§›ë³´ê¸°" ë²„íŠ¼: í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ sub_list í˜ì´ì§€ë¡œ ì´ë™ -->
                    <!-- ?category=í•œì‹ í˜•íƒœë¡œ ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì „ë‹¬ -->
                    <button class="more-btn" 
                            onclick="location.href='/sub_list?category={{ category }}&location={{location}}'">
                        ë” ë§›ë³´ê¸° â†’
                    </button>
                </div>
                
                <div class="restaurant-grid">
                    {% for restaurant in recommendations[category] %}
                    <div class="restaurant-card">
                        <div class="restaurant-image">
                            <img src="{{restaurant.img}}" height="50px" alt="ì´ë¯¸ì§€ ì„¤ëª…">
                        </div>
                        
                        <div class="restaurant-info">
                            <h3 class="restaurant-name">{{ restaurant.name }}</h3>
                            <p class="restaurant-price">ğŸ’° 
                                {% if restaurant.menu.get('avg_price') != "ë³€ë™" %}
                                    í‰ê·  ë©”ë‰´ ê°€ê²© {{restaurant.menu.get('avg_price')}}ì›
                                {% else %}
                                    ë³€ë™
                                {% endif %}
                            </p>
                            
                            <button class="detail-btn" 
                                    onclick="location.href='/detail?category={{ category }}&name={{ restaurant.name | urlencode }}'">
                                ìì„¸íˆ ë³´ê¸° ğŸ”
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        {% endfor %}

    <!-- ê°ì • ê¸°ë°˜ ë˜ëŠ” ê¸°íƒ€: ê¸°ì¡´ ì½”ë“œ ê·¸ëŒ€ë¡œ -->
    {% else %}
        <!-- Jinja2 ë°˜ë³µë¬¸: recommendations ë”•ì…”ë„ˆë¦¬ë¥¼ ë°˜ë³µ -->
        <!-- category = ì¹´í…Œê³ ë¦¬ ì´ë¦„ (í•œì‹, ì¤‘ì‹ ë“±) -->
        <!-- restaurant_list = í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ê°€ê²Œ ë¦¬ìŠ¤íŠ¸ -->
        {% for category, restaurant_list in recommendations.items() %}
        
        <!-- ì¹´í…Œê³ ë¦¬ ì„¹ì…˜ -->
        <div class="category-section">
            
            <!-- ì¹´í…Œê³ ë¦¬ í—¤ë” (í•œì‹, ì¤‘ì‹ ì¼ì‹ ì–‘ì‹...) -->
            <div class="category-header">
                <!-- ì¹´í…Œê³ ë¦¬ ì´ë¦„ -->
                <h2 class="category-title">{{ category }}</h2>
                
                <!-- "ë” ë§›ë³´ê¸°" ë²„íŠ¼: í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ sub_list í˜ì´ì§€ë¡œ ì´ë™ -->
                <!-- ?category=í•œì‹ í˜•íƒœë¡œ ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì „ë‹¬ -->
                <button class="more-btn" 
                        onclick="location.href='/sub_list?emotion={{selected_value}}&category={{ category }}&location={{location}}'">
                    ë” ë§›ë³´ê¸° â†’
                </button>
            </div>
            
            <!-- ê°€ê²Œ ì¹´ë“œë“¤ì„ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ -->
            <div class="restaurant-grid">
                
                <!-- í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ê° ê°€ê²Œë¥¼ ë°˜ë³µ -->
                <!-- restaurant = ê°œë³„ ê°€ê²Œ ì •ë³´ (ë”•ì…”ë„ˆë¦¬) -->
                {% for restaurant in restaurant_list %}
                
                <!-- ê°€ê²Œ ì¹´ë“œ -->
                <div class="restaurant-card">
                    
                    <!-- ê°€ê²Œ ì‚¬ì§„ ì˜ì—­ (ì‹¤ì œ ì´ë¯¸ì§€ ëŒ€ì‹  í”Œë ˆì´ìŠ¤í™€ë”) -->
                    <div class="restaurant-image">
                        <img src="{{restaurant.img}}" height="50px" alt="ì´ë¯¸ì§€ ì„¤ëª…">
                    </div>
                    
                    <!-- ê°€ê²Œ ì •ë³´ -->
                    <div class="restaurant-info">
                        <!-- ê°€ê²Œ ì´ë¦„ -->
                        <h3 class="restaurant-name">{{ restaurant.name }}</h3>
                        <!-- <h3 class="restaurant-price">{{ restaurant.address }}</h3> -->
                        
                        <!-- í‰ê·  ê°€ê²© -->
                        <p class="restaurant-price">ğŸ’° 
                            {% if restaurant.menu.get('avg_price') != "ë³€ë™" %}
                                í‰ê·  ë©”ë‰´ ê°€ê²© {{restaurant.menu.get('avg_price')}}ì›
                            {% else %}
                                ë³€ë™
                            {% endif %}
                        </p>
                        
                        <!-- í•œ ì¤„ ìš”ì•½ -->
                        <!-- <p class="restaurant-summary">{{ restaurant.summary }}</p> -->
                        
                        <!-- "ìì„¸íˆ ë³´ê¸°" ë²„íŠ¼: detail í˜ì´ì§€ë¡œ ì´ë™ -->
                        <!-- ?category=í•œì‹&name=ê¹€ë°¥ì²œêµ­ í˜•íƒœë¡œ ë°ì´í„° ì „ë‹¬ -->
                        <button class="detail-btn" 
                                onclick="location.href='/detail?category={{ category }}&name={{ restaurant.name | urlencode }}&location={{location}}'">
                            ìì„¸íˆ ë³´ê¸° ğŸ”
                        </button>
                    </div>
                    
                </div>
                
                {% endfor %}
                <!-- ê°€ê²Œ ë°˜ë³µ ë -->
                
            </div>
            <!-- restaurant-grid ë -->
            
        </div>
        <!-- category-section ë -->
        
        {% endfor %}
        <!-- ì¹´í…Œê³ ë¦¬ ë°˜ë³µ ë -->
    {% endif %}
        
    </div>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>